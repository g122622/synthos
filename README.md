# Synthosï¼šæ™ºèƒ½èŠå¤©è®°å½•å…¨é“¾è·¯åˆ†æç³»ç»Ÿ

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/g122622/synthos)

## é¡¹ç›®ç®€ä»‹

Synthos æ˜¯ä¸€ä¸ªåŸºäº `Node.js` å’Œ `TypeScript` æ„å»ºçš„æ™ºèƒ½èŠå¤©è®°å½•åˆ†æç³»ç»Ÿï¼Œä¸“æ³¨äº QQ èŠå¤©è®°å½•çš„å…¨é“¾è·¯æ•°æ®å¤„ç†ä¸ AI æ€»ç»“åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ Monorepo æ¶æ„ï¼Œèåˆè‡ªç„¶è¯­è¨€å¤„ç†ã€å‘é‡æ¨¡å‹ã€ä»»åŠ¡è°ƒåº¦ä¸ Web å‰ç«¯å±•ç¤ºï¼Œä¸ºç”¨æˆ·æä¾›ä»åŸå§‹èŠå¤©è®°å½•å¯¼å…¥ã€ä¸Šä¸‹æ–‡ç†è§£ã€å…´è¶£åº¦åˆ†æåˆ°å¯è§†åŒ–æ‘˜è¦è¾“å‡ºçš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚

æ— è®ºæ˜¯ä¸ªäººç”¨æˆ·å¸Œæœ›å›é¡¾é‡è¦å¯¹è¯ï¼Œè¿˜æ˜¯å›¢é˜Ÿç®¡ç†è€…éœ€è¦æ´å¯Ÿç¾¤èŠè¶‹åŠ¿ï¼ŒSynthos éƒ½èƒ½é€šè¿‡ AI èµ‹èƒ½ï¼Œ**è®©åˆ†æ•£åœ¨ä¸åŒç¾¤èŠã€ä¸åŒæ—¶é—´çš„æµ·é‡èŠå¤©ä¿¡æ¯å˜å¾—å¯è¯»ã€å¯æŸ¥ã€å¯ç†è§£ï¼Œå°†æµå¼ã€æ˜“å¤±çš„èŠå¤©è®°å½•æ²‰æ·€ä¸ºç»“æ„åŒ–ã€æŒä¹…åŒ–çš„ä¸ªäººä¸“å±çŸ¥è¯†åº“**ã€‚

> ## å£°æ˜
>
> 1. Synthos é¡¹ç›®çš„å¯åŠ¨ç›®çš„æ˜¯ä¸ºäº†å‡è½»æ‰‹åŠ¨é˜…è¯»å’Œç®¡ç†å·¨é‡ç¾¤èŠä¿¡æ¯çš„è´Ÿæ‹…ï¼Œä¸è´Ÿè´£éªŒè¯è¿™äº›ä¿¡æ¯çš„å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€æ—¶æ•ˆæ€§ã€åˆè§„æ€§ï¼Œä¸ä¿è¯ä½¿ç”¨è¿™äº›ä¿¡æ¯è€Œè·å¾—çš„ç»“æœã€‚å¯¹äºæœ‰å®³ä¿¡æ¯é€ æˆçš„è´Ÿé¢å½±å“ï¼Œä½œè€…äº¦ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚
> 2. Synthos é€šè¿‡éå®˜æ–¹æŠ€æœ¯æ‰‹æ®µè§£å¯†å¹¶è§£æ QQ çš„æœ¬åœ°æ¶ˆæ¯æ•°æ®åº“æ¥è·å–ç¾¤èŠæ¶ˆæ¯ã€‚åœ¨è¯»å–æ•°æ®åº“çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå…¨ç¨‹ä¿æŒåªè¯»ï¼Œä¸ä¼šå¯¹ç”¨æˆ·æ•°æ®å®Œæ•´æ€§é€ æˆæŸåï¼›ç”±äº Synthos é‡‡ç”¨æ—è·¯æ–¹å¼éä¾µå…¥å¼çš„è·å–ç¾¤èŠæ¶ˆæ¯ï¼Œå› æ­¤è¢«å®˜æ–¹æ£€æµ‹åˆ°å¹¶å°å·çš„é£é™©æä½ã€‚

---

## ç•Œé¢å±•ç¤º

äº®è‰²æ¨¡å¼ï¼š  
![äº®è‰²æ¨¡å¼](./docs/assets/å‰ç«¯æˆªå›¾2.webp)

æš—é»‘æ¨¡å¼ï¼š  
![æš—é»‘æ¨¡å¼](./docs/assets/å‰ç«¯æˆªå›¾1.webp)

ç»†èŠ‚äº¤äº’ï¼š  
![ç»†èŠ‚](./docs/assets/å‰ç«¯æˆªå›¾3.webp)

ç¾¤ç»„ç®¡ç†ç•Œé¢ï¼š  
![ç¾¤ç»„ç®¡ç†](./docs/assets/å‰ç«¯æˆªå›¾4.webp)

é…ç½®é¢æ¿
![é…ç½®é¢æ¿](./docs/assets/é…ç½®é¢æ¿æˆªå›¾.png)

---

## ç³»ç»Ÿæ¶æ„

![ç³»ç»Ÿæ¶æ„å›¾](./docs/assets/Synthosæ¶æ„7.drawio.png)

Deepwiki: [https://deepwiki.com/g122622/synthos](https://deepwiki.com/g122622/synthos)

---

## æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½é¢„å¤„ç†**ï¼šè‡ªåŠ¨åˆ†ç»„ã€ä¸Šä¸‹æ–‡æ‹¼æ¥ã€å¼•ç”¨æ¶ˆæ¯è¿½è¸ª
- **AI æ‘˜è¦ç”Ÿæˆ**ï¼šåŸºäº äº‘ç«¯/æœ¬åœ° æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å¯¹è¯æ‘˜è¦
- **å…´è¶£åº¦æŒ‡æ•°**ï¼šç”¨æˆ·å¯è®¾ç½®å…³é”®è¯åå¥½ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªè¯é¢˜æ‰“åˆ†æ’åºï¼ˆæ”¯æŒè´Ÿå‘åé¦ˆï¼‰
- **å†å²è®°å½•è‡ªåŠ¨æ‹‰å–**ï¼šæ”¯æŒå¢é‡åŒæ­¥ä¸å†å²å›æº¯
- **æ—¥æŠ¥è‡ªåŠ¨ç”Ÿæˆ**ï¼šæ¯æ—¥æ±‡æ€»é«˜ä»·å€¼è®¨è®ºå†…å®¹
- **å¤šç¾¤ç»„ç®¡ç†**ï¼šçµæ´»é…ç½®ä¸åŒç¾¤ç»„çš„åˆ†æç­–ç•¥

### Agent å¯¹è¯ï¼ˆæµå¼ï¼‰

- WebUI å¯¹å¤–æä¾› Agent é—®ç­”èƒ½åŠ›ï¼Œå¹¶æ”¯æŒ **REST SSEï¼ˆ`POST /api/agent/ask/stream`ï¼‰** å…¨æµå¼è¾“å‡ºã€‚
- äº‹ä»¶åè®®ä¸ºç¨³å®šä¸šåŠ¡äº‹ä»¶ï¼š`token` / `tool_call` / `tool_result` / `done` / `error`ï¼ˆç”¨äºå‰ç«¯å±•ç¤º token ä¸å·¥å…·è°ƒç”¨è¿‡ç¨‹ï¼‰ã€‚
- å•å®ä¾‹å¹¶å‘ä¿æŠ¤ï¼šåŒä¸€ `conversationId` ä¸å…è®¸å¹¶å‘åŒå‘ï¼ˆå†²çªæ—¶è¿”å› HTTP `409`ï¼‰ã€‚

æ¥å£ç»†èŠ‚ï¼ˆè¯·æ±‚å‚æ•°ã€äº‹ä»¶æ ¼å¼ã€time-travel æ¥å£ç­‰ï¼‰è§ï¼š[docs/æ¥å£æ–‡æ¡£/APIæ–‡æ¡£.md](./docs/æ¥å£æ–‡æ¡£/APIæ–‡æ¡£.md)

> **TODOæ„¿æœ›å•**  
>
> - [TODO] è½¬å‘èŠå¤©è®°å½•è·Ÿéš  
> - âœ… å·²å®Œæˆ å¼•ç”¨èŠå¤©è®°å½•è·Ÿéš  
> - [TODO] ä¸»åŠ¨æ‹‰å–å†å²èŠå¤©è®°å½•ï¼ˆâš ï¸ç›®å‰æŠ€æœ¯å®ç°é‡åˆ°å›°éš¾ï¼‰
> - âœ… æ¯å¤©ç”Ÿæˆæ—¥æŠ¥
> - âœ… ç®€å•æ˜“ç”¨çš„è®¾ç½®é¢æ¿
> - âœ… å·²å®Œæˆ å°†å…´è¶£åº¦æ‰“åˆ†åç«¯æ¨¡å‹è¿ç§»è‡³ollamaçš„bge-m3ï¼Œä»¥åˆ©ç”¨GPUåŠ é€Ÿ
> - âœ… æ”¯æŒåœ¨æ‰“åˆ†æˆ–è€…ragå‘é‡ç”Ÿæˆæ—¶ï¼Œè‡ªåŠ¨å°†ç¾¤æ˜µç§°æ›¿æ¢ä¸ºç±»ä¼¼"ç”¨æˆ·1"è¿™æ ·çš„æ˜µç§°ï¼Œé¿å…æŠ½è±¡æ˜µç§°å½±å“æ¨¡å‹ç†è§£
> - âœ… å·²å®Œæˆ ç”¨æˆ·è¾“å…¥ragé—®é¢˜åï¼Œå…ˆè®©llmç”ŸæˆæŸ¥è¯¢è®¡åˆ’ï¼ˆMulti-Queryï¼‰ï¼Œç„¶åå†æŸ¥å‘é‡æ•°æ®åº“ï¼Œå¹¶å¯¹ç»“æœå»é‡
> - âœ… æ„å»ºragé—®ç­”ä¸Šä¸‹æ–‡æ—¶ï¼Œæ’å…¥å½“å‰æ—¥æœŸå’Œæ¯ä¸ªè¯é¢˜çš„æ—¥æœŸï¼Œä»¥æé«˜æ¨¡å‹å›ç­”çš„å‡†ç¡®æ€§
> - âœ… RAGå‰ç«¯é—®ç­”é¡µé¢æ”¯æŒ 1. è§£æè¯é¢˜ï¼Œå¹¶åœ¨é¼ æ ‡hoveråè‡ªåŠ¨å±•ç¤ºè¯é¢˜è¯¦æƒ…æµ®å±‚ 2. æ¸²æŸ“markdown 3. æ”¯æŒå…¨æ–‡å¤åˆ¶
> - âœ… RAGæ”¯æŒè®°å¿†å†å²ä¼šè¯
> - âœ… å·²å®Œæˆ init() é˜²é‡å…¥
> - [TODO] æ”¯æŒæ ¹æ®nicknameåæŸ¥qqå·ï¼Œè¿›è€Œå±•ç¤ºå¤´åƒ
> - [TODO] æ”¯æŒæŒ‰ç…§ç¾¤å‹å‘è¨€æ•°é‡æ’åï¼ˆå¯æŒ‰ç…§ç¾¤ã€æ—¶é—´æ®µç­‰ç­›é€‰ï¼‰ã€åˆ†ææ ¹æ®æ¯ä¸ªç¾¤å‹çš„å‘è¨€å†…å®¹ç”Ÿæˆç¾¤å‹ç”»åƒ
> - [TODO] é¢„å¤„ç†æ”¯æŒå¯¹å›¾ç‰‡è¿›è¡Œocrå’Œvllmè¯†åˆ«
> - âœ… ç”Ÿæˆæ‘˜è¦ã€å›ç­”ç­‰åœºæ™¯çš„ä¸Šä¸‹æ–‡è¡¥å……èƒŒæ™¯çŸ¥è¯†ï¼ˆä½¿ç”¨å…³é”®è¯æ£€ç´¢æ¥å¬å›ï¼‰
> - [TODO] ragå¬å›å¡ç‰‡å±•ç¤ºæ¨¡å‹å
> - [TODO] ä¸Šä¸‹æ–‡ä¸­é—´ä»¶æ”¯æŒè¡¥å……é“¾æ¥æŸ¥è¯¢ç»“æœ
> - [TODO] ä¸Šä¸‹æ–‡ä¸­é—´ä»¶æ”¯æŒè¿‡æ»¤è¿ç¦è¯
> - âœ… åç«¯å­é¡¹ç›®å¯ä»¥ç›‘å¬ä»£ç å˜åŠ¨ï¼Œè¿›è¡ŒHMR
> - [TODO] æ”¯æŒå¯è§†åŒ–ä»»åŠ¡ç¼–æ’
> - âœ… æ”¯æŒç›‘æ§å„ä¸ªæ¨¡å—çš„CPUå’Œå†…å­˜å ç”¨ã€æ”¯æŒç›‘æ§å­˜å‚¨ç©ºé—´å ç”¨ã€‚å°†è¿™äº›æ•°æ®æŒä¹…åŒ–ï¼Œå¹¶å¯é€šè¿‡å‰ç«¯çœ‹åˆ°è¶‹åŠ¿å›¾ï¼Œä»¥åŠé€šè¿‡å¥åº·æ£€æµ‹æ¥å£çœ‹åˆ°å®æ—¶å€¼ã€‚
> - âœ… å·²å®Œæˆ å…´è¶£åº¦æŒ‡æ•°ï¼šç”¨æˆ·ç»™å‡ºè‡ªå·±çš„å…´è¶£åå¥½ï¼ˆå…³é”®è¯æ ‡ç­¾ç»„ï¼‰ï¼Œç³»ç»Ÿæ ¹æ®ç”¨æˆ·çš„å…´è¶£åå¥½ä¸ºæ¯ä¸ªè¯é¢˜æ‰“åˆ†ï¼Œæ’åºåæ¨èç»™ç”¨æˆ·ã€‚ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ ‡è®°ä¸å–œæ¬¢çš„è¯é¢˜ï¼Œæ­¤æ—¶è¯é¢˜å¾—åˆ†ä¸ºè´Ÿæ•°ï¼‰
> - âœ… å·²å®Œæˆ å‘é‡åµŒå…¥ä¸è¯­ä¹‰æ£€ç´¢ï¼šåŸºäº Ollama + bge-m3 ç”Ÿæˆè¯é¢˜å‘é‡åµŒå…¥ï¼Œæ”¯æŒ RAG è¯­ä¹‰æœç´¢

---

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **ğŸ§‘â€ğŸ’»è¯­è¨€**ï¼šçº¯ TypeScript + Node
- **ğŸ¯é¡¹ç›®ç®¡ç†**ï¼šPnpm + Monorepo
- **ğŸ³å®¹å™¨åŒ–/éƒ¨ç½²ï¼ˆWIPï¼‰**ï¼šDocker Compose + Nginxï¼ˆå‰ç«¯é™æ€æ‰˜ç®¡ & /api åä»£ï¼‰
- **ğŸ’¬RPCåº“**ï¼štRPC
- **ğŸ’‰ä¾èµ–æ³¨å…¥æ¡†æ¶**ï¼šTSyringe
- **ğŸ•—ä»»åŠ¡è°ƒåº¦ä¸ç¼–æ’æ¡†æ¶**ï¼šAgenda
- **ğŸ“šæ•°æ®åº“**ï¼šMongoDBï¼ˆä»»åŠ¡è°ƒåº¦ï¼‰ + SQLiteï¼ˆèŠå¤©è®°å½• & aiç”Ÿæˆæ•°æ®å­˜å‚¨ï¼‰ + LevelDBï¼ˆKVå…ƒæ•°æ®å­˜å‚¨ï¼‰ + sqlite-vecï¼ˆå‘é‡ç´¢å¼•å­˜å‚¨ï¼‰
- **ğŸ“¦å‘é‡æ•°æ®åº“**ï¼šåŸºäº better-sqlite3 + sqlite-vec çš„è½»é‡çº§å‘é‡å­˜å‚¨æ–¹æ¡ˆ
- **ğŸ¤–LLMæ¡†æ¶**ï¼šLangchainï¼Œæ”¯æŒä»»æ„äº‘ç«¯ LLM or æœ¬åœ°çš„ Ollama
- **ğŸ§ªæµ‹è¯•æ¡†æ¶**ï¼šVitest  
- **ğŸŒWeb åç«¯æ¡†æ¶**ï¼šExpress
- **âš›ï¸Web å‰ç«¯æ¡†æ¶**ï¼šReact + ECharts + HeroUI + Tailwind CSS

### æ¨¡å—åˆ’åˆ†

| æ¨¡å— | èŒè´£ |
|------|------|
| `data-provider` | ä» QQ ç­‰ IM å¹³å°è·å–åŸå§‹èŠå¤©è®°å½• |
| `preprocessing` | æ¸…æ´—ã€åˆ†ç»„ã€ä¸Šä¸‹æ–‡æ‹¼æ¥ã€å¼•ç”¨è§£æ |
| `ai-model` | æ–‡æœ¬å‘é‡åŒ–ã€ä¸»é¢˜æå–ã€æ‘˜è¦ç”Ÿæˆã€å…´è¶£åº¦è®¡ç®—ã€å‘é‡åµŒå…¥å­˜å‚¨ä¸æ£€ç´¢ï¼ˆRAGï¼‰ |
| `orchestrator` | Pipeline è°ƒåº¦å™¨ï¼ŒæŒ‰é¡ºåºä¸²è”æ‰§è¡Œå„æ•°æ®å¤„ç†ä»»åŠ¡ï¼ˆProvideData â†’ Preprocess â†’ AISummarize â†’ GenerateEmbedding â†’ InterestScoreï¼‰ |
| `webui-backend` | æä¾› RESTful APIï¼Œæ”¯æŒç¾¤ç»„ç®¡ç†ã€æ¶ˆæ¯æŸ¥è¯¢ã€ç»“æœè·å– |
| `common` | å…±äº«ç±»å‹å®šä¹‰ã€é…ç½®ç®¡ç†ã€æ•°æ®åº“å·¥å…·ã€æ—¥å¿—ç³»ç»Ÿ |

---

## å¿«é€Ÿå¼€å§‹

> âš ï¸ **æ¨èç¡¬ä»¶é…ç½®**  
>
> - ç”±äºéœ€è¿è¡Œ Ollama æœåŠ¡ï¼ˆé€‰é…ï¼‰ï¼ŒåŠ ä¸Š MongoDBã€Node è¿›ç¨‹å’Œ SQLite å®ä¾‹ï¼Œ**å»ºè®®å†…å­˜ â‰¥16GB**ã€‚
> - ä¸­ç«¯ CPU
> - ã€é€‰é…ã€‘æ”¯æŒ CUDA çš„ GPUï¼ˆå¦‚æœ llm å’ŒåµŒå…¥æ¨¡å‹éƒ½ä½¿ç”¨äº‘ç«¯æœåŠ¡ï¼Œåˆ™æ— éœ€æœ¬åœ° GPUï¼‰
> - 10Gä»¥ä¸Šå‰©ä½™ç¡¬ç›˜ç©ºé—´ã€‚

![ç¡¬ä»¶è¦æ±‚](./docs/assets/hardware.png)

### 1. ç¯å¢ƒå‡†å¤‡

#### å®‰è£… MongoDB

é¡¹ç›®ä¾èµ– Agenda è¿›è¡Œä»»åŠ¡è°ƒåº¦ï¼Œéœ€æå‰å®‰è£… [MongoDB ç¤¾åŒºç‰ˆ](https://www.mongodb.com/try/download/community) å¹¶ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

#### å®‰è£… Ollama å¹¶ä¸‹è½½ bge-m3 æ¨¡å‹ï¼ˆç”¨äº RAG å‘é‡æ£€ç´¢ï¼‰

é¡¹ç›®ä½¿ç”¨ Ollama éƒ¨ç½² `bge-m3` æ¨¡å‹ç”Ÿæˆ 1024 ç»´åµŒå…¥å‘é‡ï¼Œç”¨äºè¯é¢˜çš„è¯­ä¹‰æ£€ç´¢ã€‚

1. **å®‰è£… Ollama**ï¼šè®¿é—® [Ollama å®˜ç½‘](https://ollama.ai/) ä¸‹è½½å¹¶å®‰è£…

2. **æ‹‰å– bge-m3 æ¨¡å‹**ï¼š

```bash
ollama pull bge-m3
```

1. **ç¡®ä¿ Ollama æœåŠ¡è¿è¡Œ**ï¼šé»˜è®¤ç›‘å¬ `http://localhost:11434`

> ğŸ’¡ **æç¤º**ï¼šOllama æœåŠ¡ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œã€‚å¦‚éœ€æ‰‹åŠ¨å¯åŠ¨ï¼Œæ‰§è¡Œ `ollama serve`ã€‚

#### å‡†å¤‡é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `synthos_config.json`ï¼Œæ ¼å¼è¯·å‚è€ƒ [`./common/config/@types/GlobalConfig.ts`](d:\FR_Projects\synthos\common\config\@types\GlobalConfig.ts)ã€‚  
QQ æ•°æ®åº“å¯†é’¥é…ç½®æ–¹æ³•è¯¦è§ï¼š[https://docs.aaqwq.top/](https://docs.aaqwq.top/)

é™„ï¼š**å‘é‡åµŒå…¥ç›¸å…³é…ç½®ç¤ºä¾‹**ï¼ˆé…ç½®æ–‡ä»¶ä¸­çš„ `ai.embedding` å’Œ `ai.rpc` éƒ¨åˆ†ï¼‰ï¼š

```json
{
  "ai": {
    "embedding": {
      "ollamaBaseURL": "http://localhost:11434",
      "model": "bge-m3",
      "batchSize": 10,
      "vectorDBPath": "./data/vectors.db",
      "dimension": 1024
    },
    "rpc": {
      "port": 7979
    }
  },
  "orchestrator": {
    "pipelineIntervalInMinutes": 60
  }
}
```

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `ollamaBaseURL` | Ollama æœåŠ¡åœ°å€ | `http://localhost:11434` |
| `model` | åµŒå…¥æ¨¡å‹åç§° | `bge-m3` |
| `batchSize` | æ‰¹é‡ç”Ÿæˆå‘é‡çš„å¤§å° | `10` |
| `vectorDBPath` | å‘é‡æ•°æ®åº“å­˜å‚¨è·¯å¾„ | - |
| `dimension` | å‘é‡ç»´åº¦ï¼ˆéœ€ä¸æ¨¡å‹åŒ¹é…ï¼‰ | `1024` |
| `rpc.port` | RAG RPC æœåŠ¡ç«¯å£ | `7979` |

> ğŸ’¡ **è¿ç»´å»ºè®®**ï¼šæ•°æ®æ— ä»·ï¼Œé¡¹ç›®è¿è¡Œä¸­äº§ç”Ÿçš„ SQLiteã€LevelDB æ•°æ®åº“ä»¥åŠå‘é‡æ•°æ®åº“å»ºè®®å®šæœŸæ‰§è¡Œ"3-2-1"å¤‡ä»½ç­–ç•¥ï¼ˆ3ä»½å‰¯æœ¬ã€2ç§ä»‹è´¨ã€1ä»½å¼‚åœ°ï¼‰ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚
>
### 2. å¯åŠ¨é¡¹ç›®

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨æ–°çš„ HMR å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰âš¡

æ‰€æœ‰åç«¯å­é¡¹ç›®ç°å·²æ”¯æŒ**çƒ­é‡è½½ï¼ˆHMRï¼‰**åŠŸèƒ½ï¼Œä»£ç ä¿®æ”¹åä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡å¯æœåŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

```bash
# 1. å®‰è£…monorepoä¾èµ–
pnpm i # è¿™ä¸ä»…ä¼šå®‰è£…æ ¹ç›®å½•ä¸‹çš„ä¾èµ–ï¼Œè¿˜ä¼šè‡ªåŠ¨å®‰è£…æ‰€æœ‰å­é¡¹ç›®çš„ä¾èµ–

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå«å‰åç«¯ï¼Œæ”¯æŒçƒ­é‡è½½ï¼‰
pnpm dev:all

# æˆ–è€…ï¼Œä»…å¯åŠ¨åç«¯æœåŠ¡ï¼ˆä¸å«å‰ç«¯ï¼‰
pnpm dev:backend

# æˆ–è€…ï¼Œä»…å¯åŠ¨é…ç½®é¢æ¿ï¼ˆè½»é‡çº§æ¨¡å¼ï¼‰
pnpm dev:config

# æˆ–è€…ï¼Œå¯åŠ¨å®Œæ•´æœåŠ¡ + å…¬ç½‘è½¬å‘
pnpm dev:forwarder
```

---

## Docker éƒ¨ç½²ï¼ˆWIPï¼Œæš‚ä¸æ¨èï¼‰

è¯¥æ–¹æ¡ˆå°† `orchestrator` / `preprocessing` / `ai-model` / `webui-backend` / `webui-frontend` / `MongoDB` å®¹å™¨åŒ–ï¼Œ
`data-provider` ä»åœ¨å®¿ä¸»æœºè¿è¡Œï¼ˆå› ä¸ºå…¶ä¾èµ–æœ¬æœº QQNT æ•°æ®åº“ä¸ VFS DLLï¼‰ã€‚

### 1) å¯åŠ¨å®¹å™¨

```bash
docker compose up -d --build
```

å¯é€‰å¯ç”¨ Ollamaï¼š

```bash
docker compose --profile ollama up -d --build
```

### 2) åœ¨å®¿ä¸»æœºå¯åŠ¨ data-providerï¼ˆè¿æ¥å®¹å™¨ Mongoï¼‰

> æ³¨æ„ï¼š`docker-compose.yml` ä¸­æä¾›äº†ä¸€ä¸ª `host-only` profile ä¸‹çš„ `data-provider` å ä½æœåŠ¡ï¼Œä»…ç”¨äºæç¤ºè¯¥ç»„ä»¶éœ€åœ¨å®¿ä¸»æœºè¿è¡Œï¼Œå¹¶ä¸ä¼šçœŸæ­£å®¹å™¨åŒ–è¯¥è¿›ç¨‹ã€‚

```bash
set SYNTHOS_MONGODB_URL=mongodb://localhost:27017/synthos
pnpm --filter data-provider dev
```

PowerShellï¼š

```powershell
$env:SYNTHOS_MONGODB_URL="mongodb://localhost:27017/synthos"
pnpm --filter data-provider dev
```

### 3) è®¿é—® WebUI

- å‰ç«¯ï¼ˆnginxï¼‰ï¼šhttp://localhost:8080
- åç«¯å¥åº·æ£€æŸ¥ï¼šhttp://localhost:3002/health
- AI RPCï¼ˆtRPC HTTP/WSï¼‰ï¼šhttp://localhost:7979 ï¼ˆWS åŒç«¯å£ï¼‰

> é…ç½®æ–‡ä»¶é»˜è®¤æŒ‚è½½ä¸º `docker/config/synthos_config.json`ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼š`/config/synthos_config.json`ï¼‰ã€‚
> å¦‚éœ€è‡ªå®šä¹‰ï¼Œå¯ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨ `synthos_config_override.json` è¿›è¡Œè¦†ç›–ã€‚
> å»ºè®®æŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ `apiKey`/`dbKey`ï¼‰æ”¾åˆ° `synthos_config_override.json`ï¼ˆå·²è¢« gitignoreï¼‰ï¼Œé¿å…è¯¯æäº¤ã€‚

**å¯ç”¨çš„å¯åŠ¨è„šæœ¬ï¼š**

| å‘½ä»¤ | è¯´æ˜ | åŒ…å«çš„æœåŠ¡ |
|------|------|-----------|
| `pnpm dev:all` | å®Œæ•´å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰ | orchestrator, preprocessing, ai-model, data-provider, webui-backend, webui-frontend |
| `pnpm dev:backend` | ä»…åç«¯æœåŠ¡ | orchestrator, preprocessing, ai-model, data-provider, webui-backend |
| `pnpm dev:webui` | WebUI å¼€å‘æ¨¡å¼ | ai-model, webui-backend, webui-frontend |
| `pnpm dev:config` | é…ç½®é¢æ¿æ¨¡å¼ | webui-backend (é…ç½®æ¨¡å¼), webui-frontend |
| `pnpm dev:forwarder` | å®Œæ•´æœåŠ¡ + å…¬ç½‘è½¬å‘ | æ‰€æœ‰æœåŠ¡ + webui-forwarder |

**çƒ­é‡è½½ç‰¹æ€§ï¼š**

- âœ… **è‡ªåŠ¨æ£€æµ‹å˜åŒ–**ï¼šç›‘å¬ `src/` å’Œ `common/` ç›®å½•çš„ `.ts` å’Œ `.json` æ–‡ä»¶
- âœ… **å¿«é€Ÿé‡è½½**ï¼šä¿®æ”¹ä»£ç å 2-5 ç§’å†…è‡ªåŠ¨é‡æ–°ç¼–è¯‘å’Œé‡å¯
- âœ… **å‰ç«¯ HMR**ï¼šå‰ç«¯ä½¿ç”¨ Viteï¼Œæ”¯æŒæé€Ÿçš„æ¨¡å—çƒ­æ›¿æ¢ï¼ˆé€šå¸¸ < 1 ç§’ï¼‰
- âœ… **å¹¶è¡Œå¯åŠ¨**ï¼šæ‰€æœ‰æœåŠ¡å¹¶è¡Œå¯åŠ¨ï¼Œæ— éœ€ç­‰å¾…

#### æ–¹å¼äºŒï¼šä½¿ç”¨åŸæœ‰çš„å¯åŠ¨è„šæœ¬ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨åŸæœ‰çš„ä¸²è¡Œå¯åŠ¨æ–¹å¼ï¼ˆå…¼å®¹æ€§æ›´å¥½ï¼Œä½†ä¸æ”¯æŒçƒ­é‡è½½ï¼‰ï¼š

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆä¸²è¡Œå¯åŠ¨ï¼Œé—´éš” 3 ç§’ï¼‰
npm run dev

# æˆ–è€…ï¼Œä»…å¯åŠ¨é…ç½®é¢æ¿ï¼ˆè½»é‡çº§æ¨¡å¼ï¼‰
npm run config
```

æœåŠ¡å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

- WebUI åç«¯ï¼š`http://localhost:3002`
- å¥åº·æ£€æŸ¥æ¥å£ï¼š`GET /health`
- é…ç½®é¢æ¿ï¼š`http://localhost:5173/config`ï¼ˆä»…å¯åŠ¨é…ç½®é¢æ¿æ—¶ï¼‰

æµ‹è¯•ç¯å¢ƒå¯ç”¨mockï¼š `VITE_MOCK_ENABLED=true pnpm dev`

---

## API ä¸å‰ç«¯å¼€å‘

- **API æ–‡æ¡£**ï¼šè¯¦è§ [`applications/webui-backend/docs/APIæ–‡æ¡£.md`](d:\FR_Projects\synthos\applications\webui-backend\docs\APIæ–‡æ¡£.md)
- **å‰ç«¯å¼€å‘æŒ‡å¼•**ï¼šè¯¦è§ [`applications/webui-backend/docs/å‰ç«¯å¼€å‘æŒ‡å¼•æ–‡æ¡£.md`](d:\FR_Projects\synthos\applications\webui-backend\docs/å‰ç«¯å¼€å‘æŒ‡å¼•æ–‡æ¡£.md)

æ ¸å¿ƒæ¥å£åŒ…æ‹¬ï¼š

- `GET /api/group-details`ï¼šè·å–ç¾¤ç»„åˆ—è¡¨
- `GET /api/chat-messages-by-group-id`ï¼šæŒ‰ç¾¤ç»„æŸ¥è¯¢æ¶ˆæ¯
- `GET /api/ai-digest-result-by-topic-id`ï¼šè·å– AI æ‘˜è¦ç»“æœ
- `GET /api/is-session-summarized`ï¼šæ£€æŸ¥ä¼šè¯æ˜¯å¦å·²æ€»ç»“

---
